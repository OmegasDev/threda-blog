---
export interface Props {
  title: string;
  description?: string;
  ogImage?: string;
  canonical?: string;
}

const { 
  title, 
  description = "Threda - Your real-time news and community platform. Stay in the loop with breaking news, trending topics, and community discussions across tech, global events, and more.", 
  ogImage, 
  canonical 
} = Astro.props;

const canonicalURL = canonical || new URL(Astro.url.pathname, Astro.site);
---

<!doctype html>
<html lang="en" class="scroll-smooth dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalURL} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage || "/default-og.jpg"} />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonicalURL} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={ogImage || "/default-og.jpg"} />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Theme Script - Set dark mode as default -->
    <script is:inline>
      // Set dark mode as default and prevent flash
      (function() {
        const theme = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        // Default to dark mode
        if (!theme) {
          document.documentElement.classList.add('dark');
        } else if (theme === 'dark') {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
        
        // Show theme modal after 5 seconds if not seen before
        if (!localStorage.getItem('themeModalSeen')) {
          setTimeout(() => {
            const modal = document.getElementById('theme-preference-modal');
            if (modal) {
              modal.classList.remove('hidden');
              modal.classList.add('flex');
            }
          }, 5000);
        }
      })();
    </script>
    
    <!-- Schema.org -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Threda",
        "url": "https://threda.com",
        "description": "Your real-time news and community platform. Stay in the loop with breaking news and trending topics.",
        "publisher": {
          "@type": "Organization",
          "name": "Threda",
          "logo": {
            "@type": "ImageObject",
            "url": "https://threda.com/logo.png"
          }
        }
      }
    </script>
  </head>
  <body class="bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 font-sans antialiased transition-colors duration-300">
    <!-- Theme Preference Modal -->
    <div id="theme-preference-modal" class="fixed inset-0 z-[100] hidden items-center justify-center bg-black/50 backdrop-blur-sm">
      <div class="bg-white dark:bg-slate-800 rounded-2xl p-8 w-full max-w-md mx-4 border border-slate-200 dark:border-slate-700 shadow-2xl">
        <div class="text-center mb-6">
          <div class="w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-700 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
            </svg>
          </div>
          <h3 class="text-2xl font-bold text-slate-900 dark:text-white mb-2">Choose Your Theme</h3>
          <p class="text-slate-600 dark:text-slate-400">How would you like Threda to look?</p>
        </div>
        
        <div class="space-y-3">
          <button 
            id="choose-light-theme"
            class="w-full flex items-center justify-between p-4 border-2 border-slate-200 dark:border-slate-600 rounded-xl hover:border-primary-300 dark:hover:border-primary-500 transition-all duration-200 group"
          >
            <div class="flex items-center space-x-3">
              <div class="w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg flex items-center justify-center">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
              </div>
              <div class="text-left">
                <div class="font-semibold text-slate-900 dark:text-white">Light Mode</div>
                <div class="text-sm text-slate-500 dark:text-slate-400">Clean and bright interface</div>
              </div>
            </div>
            <div class="w-6 h-6 border-2 border-slate-300 dark:border-slate-500 rounded-full group-hover:border-primary-500 transition-colors"></div>
          </button>
          
          <button 
            id="choose-dark-theme"
            class="w-full flex items-center justify-between p-4 border-2 border-primary-500 bg-primary-50 dark:bg-primary-900/20 rounded-xl transition-all duration-200 group"
          >
            <div class="flex items-center space-x-3">
              <div class="w-10 h-10 bg-gradient-to-br from-slate-700 to-slate-900 rounded-lg flex items-center justify-center">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                </svg>
              </div>
              <div class="text-left">
                <div class="font-semibold text-slate-900 dark:text-white">Dark Mode</div>
                <div class="text-sm text-slate-500 dark:text-slate-400">Easy on the eyes (Current)</div>
              </div>
            </div>
            <div class="w-6 h-6 bg-primary-500 border-2 border-primary-500 rounded-full flex items-center justify-center">
              <div class="w-2 h-2 bg-white rounded-full"></div>
            </div>
          </button>
        </div>
        
        <div class="mt-6 text-center">
          <p class="text-xs text-slate-500 dark:text-slate-400">You can change this anytime in settings</p>
        </div>
      </div>
    </div>

    <slot />
    
    <!-- Mobile Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 z-50 bg-white/95 dark:bg-slate-900/95 backdrop-blur-md border-t border-slate-200 dark:border-slate-700 md:hidden">
      <div class="grid grid-cols-5 h-16">
        <!-- Home -->
        <a href="/" class="flex flex-col items-center justify-center space-y-1 text-slate-600 dark:text-slate-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors active:scale-95">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
          </svg>
          <span class="text-xs font-medium">Home</span>
        </a>
        
        <!-- Hubs -->
        <a href="/hubs" class="flex flex-col items-center justify-center space-y-1 text-slate-600 dark:text-slate-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors active:scale-95">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
          </svg>
          <span class="text-xs font-medium">Hubs</span>
        </a>
        
        <!-- Search -->
        <a href="/search" class="flex flex-col items-center justify-center space-y-1 text-slate-600 dark:text-slate-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors active:scale-95">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          <span class="text-xs font-medium">Search</span>
        </a>
        
        <!-- Profile -->
        <a href="/dashboard/hub" class="flex flex-col items-center justify-center space-y-1 text-slate-600 dark:text-slate-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors active:scale-95">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
          </svg>
          <span class="text-xs font-medium">Profile</span>
        </a>
        
        <!-- Thred It -->
        <button 
          id="mobile-thred-button"
          class="flex flex-col items-center justify-center space-y-1 text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors active:scale-95"
        >
          <div class="w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center shadow-lg">
            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
            </svg>
          </div>
          <span class="text-xs font-medium">Thred</span>
        </button>
      </div>
    </nav>

    <!-- Floating Thred Button (Mobile Only) -->
    <button 
      id="floating-thred-button"
      class="fixed bottom-20 right-4 z-40 w-14 h-14 bg-gradient-to-r from-primary-600 to-primary-700 rounded-full shadow-xl hover:shadow-2xl flex items-center justify-center text-white md:hidden transition-all duration-300 hover:scale-110 active:scale-95"
      aria-label="Thred it"
    >
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
      </svg>
    </button>

    <!-- Thred It Modal -->
    <div id="thred-modal" class="fixed inset-0 z-50 hidden bg-black/50 backdrop-blur-sm">
      <div class="flex items-end justify-center min-h-screen p-4">
        <div class="bg-white dark:bg-slate-800 rounded-t-2xl w-full max-w-md border border-slate-200 dark:border-slate-700 max-h-[80vh] overflow-hidden">
          <div class="p-6">
            <div class="flex items-center justify-between mb-6">
              <h3 class="text-lg font-bold text-slate-900 dark:text-white">Thred It</h3>
              <button id="close-thred-modal" class="p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors">
                <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
              </button>
            </div>
            
            <div class="space-y-4">
              <p class="text-slate-600 dark:text-slate-400 text-sm">
                Select a recent news item from your followed hubs to thred:
              </p>
              
              <div id="recent-news-list" class="space-y-3 max-h-60 overflow-y-auto">
                <!-- Recent news items will be populated here -->
              </div>
              
              <div class="pt-4 border-t border-slate-200 dark:border-slate-700">
                <a 
                  href="/create-hub"
                  class="block w-full text-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors"
                >
                  Create New Hub
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- News Detail Modal -->
    <div id="news-detail-modal" class="fixed inset-0 z-50 hidden bg-black/50 backdrop-blur-sm">
      <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white dark:bg-slate-800 rounded-2xl w-full max-w-lg border border-slate-200 dark:border-slate-700 max-h-[90vh] overflow-hidden">
          <div id="news-detail-content" class="p-6">
            <!-- News detail content will be populated here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Share Modal -->
    <div id="share-modal" class="fixed inset-0 z-50 hidden bg-black/50 backdrop-blur-sm">
      <div class="flex items-end justify-center min-h-screen p-4">
        <div class="bg-white dark:bg-slate-800 rounded-t-2xl w-full max-w-md border border-slate-200 dark:border-slate-700">
          <div class="p-6">
            <div class="flex items-center justify-between mb-6">
              <h3 class="text-lg font-bold text-slate-900 dark:text-white">Share This News</h3>
              <button id="close-share-modal" class="p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors">
                <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
              </button>
            </div>
            
            <div id="share-content" class="space-y-4">
              <!-- Share content will be populated here -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Theme preference modal functionality
        const themeModal = document.getElementById('theme-preference-modal');
        const chooseLightBtn = document.getElementById('choose-light-theme');
        const chooseDarkBtn = document.getElementById('choose-dark-theme');

        function setTheme(theme) {
          if (theme === 'dark') {
            document.documentElement.classList.add('dark');
          } else {
            document.documentElement.classList.remove('dark');
          }
          localStorage.setItem('theme', theme);
          localStorage.setItem('themeModalSeen', 'true');
          
          if (themeModal) {
            themeModal.classList.add('hidden');
            themeModal.classList.remove('flex');
          }
        }

        chooseLightBtn?.addEventListener('click', () => setTheme('light'));
        chooseDarkBtn?.addEventListener('click', () => setTheme('dark'));

        // Close modal when clicking outside
        themeModal?.addEventListener('click', function(e) {
          if (e.target === themeModal) {
            localStorage.setItem('themeModalSeen', 'true');
            themeModal.classList.add('hidden');
            themeModal.classList.remove('flex');
          }
        });

        const mobileThredButton = document.getElementById('mobile-thred-button');
        const floatingThredButton = document.getElementById('floating-thred-button');
        const thredModal = document.getElementById('thred-modal');
        const closeThredModal = document.getElementById('close-thred-modal');
        const recentNewsList = document.getElementById('recent-news-list');
        const newsDetailModal = document.getElementById('news-detail-modal');
        const shareModal = document.getElementById('share-modal');
        const closeShareModal = document.getElementById('close-share-modal');

        // Mock recent news data with more details
        const recentNews = [
          { 
            id: 1, 
            title: 'OpenAI Releases GPT-5 with Revolutionary Reasoning Capabilities', 
            hub: 'AI Innovations', 
            time: '2h ago',
            excerpt: 'The new model shows unprecedented ability to solve complex problems and understand context like never before, marking a significant leap in AI development.',
            content: 'OpenAI has just announced the release of GPT-5, marking a significant leap forward in artificial intelligence capabilities. The new model demonstrates revolutionary reasoning abilities that surpass all previous iterations. Key breakthroughs include enhanced logical reasoning, improved mathematical problem-solving, and better understanding of complex contexts.',
            image: 'https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=400',
            source: 'TechCrunch',
            url: '/thred/openai-gpt5-reasoning-breakthrough'
          },
          { 
            id: 2, 
            title: 'Bitcoin Surges Past $75,000 as Institutional Adoption Accelerates', 
            hub: 'Crypto Trading', 
            time: '4h ago',
            excerpt: 'Major corporations and pension funds drive Bitcoin to new all-time highs amid growing institutional interest and regulatory clarity.',
            content: 'Bitcoin has reached a new milestone, surpassing $75,000 for the first time as institutional adoption continues to accelerate across global markets. The surge is attributed to increased institutional investment, with several Fortune 500 companies adding Bitcoin to their treasury reserves.',
            image: 'https://images.pexels.com/photos/6801648/pexels-photo-6801648.jpeg?auto=compress&cs=tinysrgb&w=400',
            source: 'CoinDesk',
            url: '/thred/bitcoin-75k-institutional-adoption'
          },
          { 
            id: 3, 
            title: 'Nigerian Startups Raise Record $2.3B in Funding This Quarter', 
            hub: 'Nigerian Startups', 
            time: '6h ago',
            excerpt: 'The Nigerian startup ecosystem continues to boom with record-breaking funding rounds across fintech, healthtech, and e-commerce sectors.',
            content: 'Nigerian startups have raised a record $2.3 billion in funding this quarter, marking the highest quarterly total in the country\'s history. The funding surge is driven by both local and international investors recognizing the potential of Nigeria\'s growing tech ecosystem.',
            image: 'https://images.pexels.com/photos/3184291/pexels-photo-3184291.jpeg?auto=compress&cs=tinysrgb&w=400',
            source: 'TechCabal',
            url: '/thred/nigerian-startups-record-funding'
          },
          { 
            id: 4, 
            title: 'Tesla Announces Breakthrough in Solid-State Battery Technology', 
            hub: 'Tech Hub', 
            time: '8h ago',
            excerpt: 'New battery technology promises 1000-mile range and 5-minute charging, potentially revolutionizing electric vehicle adoption.',
            content: 'Tesla has announced a major breakthrough in solid-state battery technology that could revolutionize the electric vehicle industry. The new batteries offer energy density three times higher than current lithium-ion batteries, enabling electric vehicles to travel over 1000 miles on a single charge.',
            image: 'https://images.pexels.com/photos/2582937/pexels-photo-2582937.jpeg?auto=compress&cs=tinysrgb&w=400',
            source: 'Electrek',
            url: '/thred/tesla-solid-state-battery-breakthrough'
          },
          { 
            id: 5, 
            title: 'Global Climate Summit Reaches Historic Agreement', 
            hub: 'Global Politics', 
            time: '12h ago',
            excerpt: '195 countries commit to ambitious new targets that could limit global warming to 1.5°C, marking a breakthrough in international cooperation.',
            content: 'World leaders at the Global Climate Summit have reached a historic agreement on carbon reduction targets, with 195 countries committing to ambitious new goals that scientists say could prevent catastrophic climate change.',
            image: 'https://images.pexels.com/photos/3184291/pexels-photo-3184291.jpeg?auto=compress&cs=tinysrgb&w=400',
            source: 'BBC News',
            url: '/thred/climate-summit-carbon-agreement'
          }
        ];

        function openThredModal() {
          // Populate recent news
          if (recentNewsList) {
            recentNewsList.innerHTML = recentNews.map(news => `
              <div class="p-3 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors cursor-pointer" onclick="showNewsDetail(${news.id})">
                <div class="flex items-start space-x-3">
                  <img src="${news.image}" alt="${news.title}" class="w-12 h-12 rounded-lg object-cover flex-shrink-0">
                  <div class="flex-1 min-w-0">
                    <h4 class="font-medium text-slate-900 dark:text-white text-sm line-clamp-2 mb-1">${news.title}</h4>
                    <div class="flex items-center justify-between text-xs text-slate-500 dark:text-slate-400">
                      <span>${news.hub}</span>
                      <span>${news.time}</span>
                    </div>
                  </div>
                </div>
              </div>
            `).join('');
          }
          
          thredModal?.classList.remove('hidden');
        }

        function closeModal() {
          thredModal?.classList.add('hidden');
          newsDetailModal?.classList.add('hidden');
          shareModal?.classList.add('hidden');
        }

        // Event listeners
        mobileThredButton?.addEventListener('click', openThredModal);
        floatingThredButton?.addEventListener('click', openThredModal);
        closeThredModal?.addEventListener('click', closeModal);
        closeShareModal?.addEventListener('click', closeModal);
        
        // Close modals when clicking outside
        [thredModal, newsDetailModal, shareModal].forEach(modal => {
          modal?.addEventListener('click', function(e) {
            if (e.target === modal) {
              closeModal();
            }
          });
        });

        // Global functions
        window.showNewsDetail = function(newsId) {
          const news = recentNews.find(n => n.id === newsId);
          if (news && newsDetailModal) {
            const content = document.getElementById('news-detail-content');
            if (content) {
              content.innerHTML = `
                <div class="flex items-center justify-between mb-4">
                  <h3 class="text-lg font-bold text-slate-900 dark:text-white">News Detail</h3>
                  <button onclick="closeModal()" class="p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors">
                    <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                  </button>
                </div>
                
                <div class="space-y-4">
                  <img src="${news.image}" alt="${news.title}" class="w-full h-48 rounded-lg object-cover">
                  
                  <div>
                    <h4 class="font-bold text-slate-900 dark:text-white text-lg mb-2">${news.title}</h4>
                    <div class="flex items-center space-x-2 text-sm text-slate-500 dark:text-slate-400 mb-3">
                      <span>${news.source}</span>
                      <span>•</span>
                      <span>${news.hub}</span>
                      <span>•</span>
                      <span>${news.time}</span>
                    </div>
                  </div>
                  
                  <p class="text-slate-600 dark:text-slate-300 leading-relaxed">${news.content}</p>
                  
                  <div class="flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-700">
                    <div class="flex items-center space-x-4">
                      <button onclick="thredNews(${news.id})" class="flex items-center space-x-2 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
                        </svg>
                        <span>Thred</span>
                      </button>
                      
                      <button onclick="likeNews(${news.id})" class="flex items-center space-x-1 px-3 py-2 bg-slate-100 dark:bg-slate-700 hover:bg-red-100 dark:hover:bg-red-900/20 text-slate-600 dark:text-slate-400 hover:text-red-600 dark:hover:text-red-400 rounded-lg transition-colors">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                        </svg>
                        <span>Like</span>
                      </button>
                    </div>
                    
                    <button onclick="showShareModal(${news.id})" class="flex items-center space-x-1 px-3 py-2 bg-slate-100 dark:bg-slate-700 hover:bg-blue-100 dark:hover:bg-blue-900/20 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 rounded-lg transition-colors">
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                      </svg>
                      <span>Share</span>
                    </button>
                  </div>
                  
                  <div class="pt-4">
                    <a href="${news.url}" class="block w-full text-center px-4 py-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 rounded-lg transition-colors">
                      Read Full Article on Threda
                    </a>
                  </div>
                </div>
              `;
            }
            
            thredModal?.classList.add('hidden');
            newsDetailModal?.classList.remove('hidden');
          }
        };

        window.showShareModal = function(newsId) {
          const news = recentNews.find(n => n.id === newsId);
          if (news && shareModal) {
            const shareContent = document.getElementById('share-content');
            const shareUrl = `https://threda.com${news.url}`;
            const shareText = `${news.title} - ${news.excerpt.substring(0, 100)}...`;
            
            if (shareContent) {
              shareContent.innerHTML = `
                <div class="mb-4">
                  <h4 class="font-medium text-slate-900 dark:text-white mb-2">${news.title}</h4>
                  <p class="text-sm text-slate-600 dark:text-slate-400">${news.excerpt}</p>
                </div>
                
                <div class="grid grid-cols-2 gap-3">
                  <button onclick="shareToFacebook('${shareUrl}', '${encodeURIComponent(shareText)}')" class="flex items-center justify-center space-x-2 p-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                    <span>Facebook</span>
                  </button>
                  
                  <button onclick="shareToTwitter('${shareUrl}', '${encodeURIComponent(shareText)}')" class="flex items-center justify-center space-x-2 p-3 bg-blue-400 hover:bg-blue-500 text-white rounded-lg transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                    </svg>
                    <span>Twitter</span>
                  </button>
                  
                  <button onclick="shareToWhatsApp('${shareUrl}', '${encodeURIComponent(shareText)}')" class="flex items-center justify-center space-x-2 p-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
                    </svg>
                    <span>WhatsApp</span>
                  </button>
                  
                  <button onclick="shareToLinkedIn('${shareUrl}', '${encodeURIComponent(shareText)}')" class="flex items-center justify-center space-x-2 p-3 bg-blue-700 hover:bg-blue-800 text-white rounded-lg transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                    <span>LinkedIn</span>
                  </button>
                  
                  <button onclick="shareToInstagram('${shareUrl}', '${encodeURIComponent(shareText)}')" class="flex items-center justify-center space-x-2 p-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-lg transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                    </svg>
                    <span>Instagram</span>
                  </button>
                  
                  <button onclick="shareToDiscord('${shareUrl}', '${encodeURIComponent(shareText)}')" class="flex items-center justify-center space-x-2 p-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0002 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"/>
                    </svg>
                    <span>Discord</span>
                  </button>
                </div>
                
                <div class="mt-4 pt-4 border-t border-slate-200 dark:border-slate-700">
                  <button onclick="copyShareLink('${shareUrl}')" class="w-full flex items-center justify-center space-x-2 p-3 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 rounded-lg transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                    </svg>
                    <span>Copy Link</span>
                  </button>
                </div>
              `;
            }
            
            newsDetailModal?.classList.add('hidden');
            shareModal?.classList.remove('hidden');
          }
        };

        // Social sharing functions
        window.shareToFacebook = function(url, text) {
          window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank', 'width=600,height=400');
        };

        window.shareToTwitter = function(url, text) {
          window.open(`https://twitter.com/intent/tweet?text=${text}&url=${encodeURIComponent(url)}`, '_blank', 'width=600,height=400');
        };

        window.shareToWhatsApp = function(url, text) {
          window.open(`https://wa.me/?text=${text}%20${encodeURIComponent(url)}`, '_blank');
        };

        window.shareToLinkedIn = function(url, text) {
          window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`, '_blank', 'width=600,height=400');
        };

        window.shareToInstagram = function(url, text) {
          // Instagram doesn't support direct sharing, so copy to clipboard
          navigator.clipboard.writeText(`${text} ${url}`).then(() => {
            alert('Content copied to clipboard! You can now paste it on Instagram.');
          });
        };

        window.shareToDiscord = function(url, text) {
          // Discord doesn't have direct sharing, so copy to clipboard
          navigator.clipboard.writeText(`${text} ${url}`).then(() => {
            alert('Content copied to clipboard! You can now paste it on Discord.');
          });
        };

        window.copyShareLink = function(url) {
          navigator.clipboard.writeText(url).then(() => {
            alert('Link copied to clipboard!');
          });
        };

        window.thredNews = function(newsId) {
          const news = recentNews.find(n => n.id === newsId);
          if (news) {
            alert(`You're now following "${news.title}" - You'll receive updates and can join the discussion!`);
            closeModal();
          }
        };

        window.likeNews = function(newsId) {
          alert('News liked! You\'ll see more content like this.');
        };

        window.closeModal = closeModal;
      });
    </script>
  </body>
</html>

<style is:global>
  html {
    scroll-behavior: smooth;
  }
  
  body {
    line-height: 1.7;
    font-feature-settings: 'kern' 1, 'liga' 1, 'calt' 1;
    padding-bottom: 4rem; /* Space for mobile nav */
  }
  
  @media (min-width: 768px) {
    body {
      padding-bottom: 0;
    }
  }
  
  h1, h2, h3, h4, h5, h6 {
    line-height: 1.3;
    font-weight: 700;
  }
  
  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }
  
  ::-webkit-scrollbar-track {
    background: theme('colors.slate.100');
  }
  
  .dark ::-webkit-scrollbar-track {
    background: theme('colors.slate.800');
  }
  
  ::-webkit-scrollbar-thumb {
    background: theme('colors.primary.400');
    border-radius: 4px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: theme('colors.primary.500');
  }
  
  /* Selection */
  ::selection {
    background: theme('colors.primary.200');
    color: theme('colors.primary.900');
  }
  
  .dark ::selection {
    background: theme('colors.primary.800');
    color: theme('colors.primary.100');
  }
  
  /* Focus styles */
  :focus-visible {
    outline: 2px solid theme('colors.primary.500');
    outline-offset: 2px;
  }
  
  /* Animations */
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .animate-slide-up {
    animation: slideUp 0.6s ease-out forwards;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>